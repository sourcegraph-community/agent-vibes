# Apify Pipeline - Environment Variables Template
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# Supabase Configuration (REQUIRED)
# =============================================================================
# Get these from: Supabase Dashboard → Settings → API
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Client-side Supabase access (for dashboard)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-public-key-here

# =============================================================================
# Apify Configuration (REQUIRED for tweet collection)
# =============================================================================
# Get these from: Apify Dashboard → Settings → Integrations → Personal API tokens
APIFY_TOKEN=your-apify-token-here
APIFY_ACTOR_ID=apidojo/tweet-scraper

# Optional: Specify a specific actor build version
# APIFY_ACTOR_BUILD=latest

# =============================================================================
# Google Gemini Configuration (REQUIRED for sentiment analysis)
# =============================================================================
# Get from: https://aistudio.google.com/ → Get API key
GEMINI_API_KEY=your-gemini-api-key-here

# =============================================================================
# Optional: Internal API Authentication
# =============================================================================
# For manual API testing and local script execution
# Generate a random secure string (e.g., openssl rand -hex 32)
INTERNAL_API_KEY=your-random-secret-key-here

# =============================================================================
# Optional: Vercel Environment Indicator
# =============================================================================
# Automatically set by Vercel in production
# VERCEL_ENV=development

# --- Sentiment Processing (Local Script) ---
# Default batch size for pending sentiments (clamped 1..25)
NUMBER_OF_PENDING_TWEETS=10
# Max retries per tweet (0..5)
SENTIMENT_MAX_RETRIES=1
# Override model version (e.g., gemini-2.5-flash or gemini-2.5-flash-lite)
SENTIMENT_MODEL_VERSION=gemini-2.5-flash

# --- Sentiment Concurrency & Rate Caps (Node job only) ---
# Concurrent in-flight requests (start small; e.g., 1–4)
SENTIMENT_CONCURRENCY=1
# Requests-per-minute cap for the local limiter
SENTIMENT_RPM_CAP=15
# Optional tokens-per-minute cap (unset to disable)
SENTIMENT_TPM_CAP=
# Estimated tokens per request used for TPM budgeting
SENTIMENT_TOKENS_PER_REQUEST_ESTIMATE=600

# Requests-per-minute cap for the local limiter (Tier 1 Flash-Lite ≈ 4000)
SENTIMENT_RPM_CAP=4000
